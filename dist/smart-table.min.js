/*!
 * SmartTable - v0.1.1
 * Developed by Andrei Belokopytov
 * Licensed under the MIT license
 *
 */

!function(){var a={};!function(a){"use strict";function b(a,b,c,d){var e,f;if(a=document.createElement(a),b&&(a.className=b),c)for(e in c)c.hasOwnProperty(e)&&(f=c[e],a.setAttribute(e,f));return d&&(a.innerText=d),a}function c(){for(var a=0;a<arguments.length;a++)if(null===arguments[a]||void 0===arguments[a])return!0;return!1}function d(a,b){var c=function(){};return c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=b,a["super"]=b,a}var e={createDomElem:b,isNullOrUndef:c,inherit:d};a.Utils=e}(a||{}),function(a){"use strict";var b={COLUMN_TYPE_TEXT:"text",COLUMN_TYPE_RANGE:"range",COLUMN_TYPE_SELECT:"select",FILTER:"filter",FILTER_RANGE:"range-filter",FILTER_RANGE_MIN:"range-min",FILTER_RANGE_MAX:"range-max",TABLE:"smart-table",HEADERS_BAR:"smart-table-headers-bar",FILTERS_BAR:"smart-table-filters-bar",NO_DATA:"no-data",COLUMN_SORTED:"sorted",COLUMN_SORT_ASC:"sort-asc",COLUMN_SORT_DESC:"sort-desc"};a.CSS=b}(a||{}),function(a){"use strict";function b(a,b){return b?a.toString().indexOf(b)>=0:!0}function c(a,b){var c=b[0],d=b[1];return d||c?c?d?d>=a&&a>=c:a>=c:d>=a:!0}function d(a,b){return b&&a!==b?!1:!0}var e={containComparator:b,rangeComparator:c,equalComparator:d};a.Comparators=e}(a||{}),function(a){"use strict";function b(a){var b=this;b.cssClass=f.FILTER,a.filter&&(b.cssClass+=a.filter.cssClass?" "+a.filter.cssClass:"",b.parser=a.filter.valueParser)}function c(a){c["super"].apply(this,arguments),this.getFilterElement=function(){return g.createDomElem("input",this.cssClass,{type:"text",placeholder:a.title})}}function d(a){var b=this;d["super"].apply(b,arguments),b.cssClass+=" "+f.FILTER_RANGE,b.condition=[],b.getFilterElement=function(){var b=this,c=document.createDocumentFragment(),d=g.createDomElem("input",b.cssClass+" "+f.FILTER_RANGE_MIN,{type:"text",placeholder:a.title}),e=g.createDomElem("input",b.cssClass+" "+f.FILTER_RANGE_MAX,{type:"text",placeholder:a.title});return c.appendChild(d),c.appendChild(e),c}}function e(a){var b=this;e["super"].apply(b,arguments),b.getFilterElement=function(){var b,c,d=this,e=g.createDomElem("select",d.cssClass),f=0,h=a.selectOptions.length;for(b=g.createDomElem("option","",{value:""}),e.appendChild(b);h>f;f++)c=a.selectOptions[f],b=g.createDomElem("option",d.cssClass,{value:c.value},c.text),e.appendChild(b);return e}}var f=a.CSS,g=a.Utils,h=a.Comparators;b.prototype={check:function(a){var b=this;return g.isNullOrUndef(a)?!1:b.comparator(a,b.condition)},setCondition:function(a,b){var c=this;c.parser&&(a=c.parser(a)),g.isNullOrUndef(b)?c.condition=a:(Array.isArray(c.condition)||(c.condition=[]),c.condition[b]=a)}},b.createFilter=function(a){switch(a.type){case f.COLUMN_TYPE_TEXT:return new c(a);case f.COLUMN_TYPE_RANGE:return new d(a);case f.COLUMN_TYPE_SELECT:return new e(a);default:return new c(a)}},g.inherit(c,b),c.prototype.comparator=h.containComparator,g.inherit(d,b),d.prototype.comparator=h.rangeComparator,g.inherit(e,b),e.prototype.comparator=h.equalComparator,a.Filter=b}(a||{}),function(a){"use strict";function b(a,b){var c,f,g,h,i={},j=document.createDocumentFragment();return Array.isArray(b)&&(b.length?b.forEach(function(b,e){c=d.createDomElem("tr","",{"grid-rowindex":e}),a.forEach(function(a,h){a.hidden||(i["data-colindex"]=h+1,f=d.createDomElem("td","",i),a.isIndex?f.innerText=e+1:(g=b[a.property],g&&("function"==typeof a.formatter?f.innerHTML=a.formatter(g):f.innerText=g)),c.appendChild(f))}),j.appendChild(c)}):(h=a.filter(function(a){return!a.hidden}),c=d.createDomElem("tr",e.NO_DATA,{"grid-rowindex":1}),f=d.createDomElem("td",e.NO_DATA,{colspan:h.length},"No data"),c.appendChild(f),j.appendChild(c))),j}function c(a){var c=this;this._tableElem=null,this._theadElem=null,this._tbodyElem=null,this._headersBar=null,this._filtersBar=null,this._cssClass=e.TABLE,this._dataset=[],this._filtered=[],this._filters={},this._columns=a.columns||[],a.cssClass&&(this._cssClass+=a.tableCssClass),"string"==typeof a.element?this.el=document.querySelector(a.element):this.el=a.element,this._columns.forEach(function(a){"index"===a.type&&(a.isIndex=!0,a.noFilter=!0,a.noSort=!0),a.noFilter||(c._filters[a.property]=f.createFilter(a))}),this.getTableData=function(){},a.actions&&(this.getTableData=a.actions.getData),this._getColumnValue=function(a,b){var c,d=a;if("string"!=typeof b.property)throw Error("Column property should be a sting");return c=b.property.split("."),c.length&&c.forEach(function(a){d=d&&void 0!==d[a]&&null!==d[a]?d[a]:null}),d},this._render=function(){for(var a,c=b(this._columns,this._filtered),d=this._tbodyElem.children.length;d--;)a=this._tbodyElem.children[d],"TR"===a.tagName&&this._tbodyElem.removeChild(a);this._setColumns(c),this._tbodyElem.appendChild(c)},this._clearFilters=function(){var a=this._theadElem.querySelectorAll("input, select");Array.prototype.forEach.call(a,function(a){a.value=""})},this._clearSort=function(){var a=this._theadElem.querySelectorAll("th");Array.prototype.forEach.call(a,function(a){a.classList.remove(e.COLUMN_SORT_ASC),a.classList.remove(e.COLUMN_SORT_DESC)})},this._setColumns=function(){var a,b,c=this,d=function(a,b){var d;d=c._tableElem.querySelectorAll('col[data-colindex="'+b+'"], th[data-colindex="'+b+'"]'),[].forEach.call(d,function(b){b.style.display=a})};this._columns.forEach(function(c,e){a=e+1,b=c.hidden?"none":"",d(b,a)},this)},function(){var a,b,f,g,h,i="",j={},k=function(a){var b,d,f,g=a.target;"TH"===g.tagName&&g.classList.contains(e.COLUMN_SORTED)&&(b=g.cellIndex,d=c._columns[b],g.classList.contains(e.COLUMN_SORT_ASC)?(f=e.COLUMN_SORT_DESC,c.sort(d,f)):(f=e.COLUMN_SORT_ASC,c.sort(d,f)),[].forEach.call(c._headersBar.children,function(a){"TH"===a.tagName&&(a.classList.remove(e.COLUMN_SORT_ASC),a.classList.remove(e.COLUMN_SORT_DESC))}),g.classList.add(f))},l=function(a){var b,d,f,g=a.target;("INPUT"===g.tagName||"SELECT"===g.tagName)&&(b=g.closest("th"),d=c._columns[b.cellIndex],f=c._filters[d.property],g.classList.contains(e.FILTER_RANGE)?g.classList.contains(e.FILTER_RANGE_MIN)?f.setCondition(g.value,0):g.classList.contains(e.FILTER_RANGE_MAX)&&f.setCondition(g.value,1):f.setCondition(g.value),c.filter())};this._tableElem=d.createDomElem("table",this._cssClass,{cols:this._columns.length}),this._theadElem=d.createDomElem("thead"),this._tbodyElem=d.createDomElem("tbody"),this._headersBar=d.createDomElem("tr",e.HEADERS_BAR),this._filtersBar=d.createDomElem("tr",e.FILTERS_BAR),this._columns.forEach(function(k,l){if(g=l+1,k.noSort||(i=e.COLUMN_SORTED),j["data-colindex"]=g,a=d.createDomElem("th",i,j,k.title),c._headersBar.appendChild(a),a=d.createDomElem("th","",j),c._filters[k.property]&&(h=c._filters[k.property],a.appendChild(h.getFilterElement())),c._filtersBar.appendChild(a),b=d.createDomElem("col","",j),k.width){if(f=parseInt(k.width,10),isNaN(f))throw{message:"Column width should be a number"};f+="px",b.style.width=f}c._tableElem.appendChild(b)}),this._filtersBar.addEventListener("input",l),this._filtersBar.addEventListener("change",l),this._headersBar.addEventListener("click",k),this._theadElem.appendChild(this._headersBar),this._theadElem.appendChild(this._filtersBar),this._tableElem.appendChild(this._theadElem),this._tableElem.appendChild(this._tbodyElem),this.el.appendChild(this._tableElem),this.refresh()}.apply(this)}var d=a.Utils,e=a.CSS,f=a.Filter;c.prototype={refresh:function(){var a=this;this._dataset=[],this._filtered=[],this._clearFilters(),this._clearSort(),this.getTableData(function(b){var c,d;b.forEach(function(b){d={},a._columns.forEach(function(e){e.property&&(c=a._getColumnValue(b,e),d[e.property]=c)}),a._dataset.push(d)}),a._filtered=a._dataset,a._render()})},filter:function(){var a,b,c,d,e=this;this._filtered=[],this._dataset.forEach(function(f){a=!0;for(b in f)if(f.hasOwnProperty(b)&&(d=e._filters[b],d&&(c=f[b],a=d.check(c),!a)))break;a&&e._filtered.push(f)}),this._render()},sort:function(a,b){var c=this,d=1;b||(b=e.COLUMN_SORT_ASC),b===e.COLUMN_SORT_DESC&&(d=-1),c._filtered.sort(function(b,c){return b[a.property]>=c[a.property]?d:b[a.property]<c[a.property]?-1*d:void 0}),c._render()},toggleColumns:function(a){var b,c=this;Array.isArray(a)||(a=[a]),a.forEach(function(a){b=c._columns[a-1],b&&("undefined"==typeof b.hidden||b.hidden===!1?b.hidden=!0:b.hidden=!1)}),this._render()},toggleFilters:function(){"none"!==this.filtersBar.style.display?this.filtersBar.style.display="none":this.filtersBar.style.display=""}},window.SmartTable=c}(a||{}),Element.prototype.closest||(Element.prototype.closest=function(a){"use strict";for(var b=this,c=Element.prototype.matches||Element.prototype.msMatchesSelector;b;){if(c.call(b,a))return b;b=b.parentElement}return null})}();
//# sourceMappingURL=smart-table.min.js.map